{{ define "main" }}
<section class="section section--border-bottom rad-animation-group">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="rad-animation-group rad-fade-down text-center mb-5">All Projects</h2>
      </div>
    </div>
    
    {{ $projects := where site.RegularPages "Type" "projects" }}
    {{ $others := where site.RegularPages "Type" "other-projects" }}
    
    {{/* Combine projects and other-projects */}}
    {{ $all := $projects | union $others }}
    
    {{/* Sort by date reverse */}}
    {{ $all = $all.ByDate.Reverse }}

    {{ range $index, $element := $all }}
        {{ $is_even := eq (mod $index 2) 0 }}
        
        <div class="row row--padded rad-animation-group rad-fade-down 
          {{ if $is_even }}flex-column-reverse flex-md-row even-row{{ else }}uneven-row{{ end }} mb-5">
          
          {{ if $is_even }}
            <div class="col-12 col-md-5 mt-4 mt-md-0 my-md-auto even">
              <h3>{{ .Title }}</h3>
              <div class="lead">
                {{ .Content }}
              </div>
              {{ if .Params.button }}
              <a href="{{ .Params.button.URL | absURL }}" class="btn btn-primary">
                {{ .Params.button.btnText }}<i class="{{ .Params.button.icon }}"></i>
              </a>
              {{ end }}
            </div>
            <div class="col-12 col-md-7 pl-md-0 text-right">
               {{ if .Params.image }}
                 {{ partial "lazypicture" (dict "src" .Params.image.src "scale" .Params.image.scale "class" "picture-works even" "alt" .Title) }}
               {{ end }}
            </div>
          {{ else }}
            <div class="col-12 col-md-7 pl-md-0 text-right not-even">
               {{ if .Params.image }}
                 {{ partial "lazypicture" (dict "src" .Params.image.src "scale" .Params.image.scale "class" "picture-works odd" "alt" .Title) }}
               {{ end }}
            </div>
            <div class="col-12 col-md-5 mt-4 mt-md-0 my-md-auto">
              <h3>{{ .Title }}</h3>
              <div class="lead">
                {{ .Content }}
              </div>
              {{ if .Params.button }}
              <a href="{{ .Params.button.URL | absURL }}" class="btn btn-primary">
                {{ .Params.button.btnText }}<i class="{{ .Params.button.icon }}"></i>
              </a>
              {{ end }}
            </div>
          {{ end }}
        </div>
    {{ end }}
  </div>
</section>
{{ end }}
